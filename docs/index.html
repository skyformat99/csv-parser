<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vince&#39;s CSV Parser: Vince&#39;s CSV Parser</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vince&#39;s CSV Parser
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Vince's CSV Parser </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/vincentlaucsb/csv-parser"></a> <a href="https://codecov.io/gh/vincentlaucsb/csv-parser"></a></p>
<h2>Motivation</h2>
<p>There's plenty of other CSV parsers in the wild, but I had a hard time finding what I wanted. Specifically, I wanted something which had an interface similar to Python's <code>csv</code> module. Furthermore, I wanted support for special use cases such as calculating statistics on very large files. Thus, this library was created with these following goals in mind:</p>
<h3>Performance</h3>
<p>This CSV parser uses multiple threads to simulatenously pull data from disk and parse it. Furthermore, it is capable of incremental streaming (parsing larger than RAM files), and quickly parsing data types.</p>
<h3>RFC 4180 Compliance</h3>
<p>This CSV parser is much more than a fancy string splitter, and follows every guideline from <a href="https://www.rfc-editor.org/rfc/rfc4180.txt">RFC 4180</a>. On the other hand, it is also robust and capable of handling deviances from the standard. An optional strict parsing mode can be enabled to sniff out errors in files.</p>
<h3>Easy to Use and <a href="https://vincentlaucsb.github.io/csv-parser">Well-Documented</a></h3>
<p>In additon to being easy on your computer's hardware, this library is also easy on you&ndash;the developer. Some helpful features include:</p><ul>
<li>Decent ability to guess the dialect of a file (CSV, tab-delimited, etc.)</li>
<li>Ability to handle common deviations from the CSV standard, such as inconsistent row lengths, and leading comments</li>
<li>Ability to manually set the delimiter and quoting character of the parser</li>
</ul>
<h3>Well Tested</h3>
<p>In addition to using modern C++ features to build a memory safe parser while still performing well, this parser has a extensive test suite.</p>
<h2>Building <a href="https://github.com/vincentlaucsb/csv-parser/releases">(latest stable version)</a></h2>
<p>All of this library's essentials are located under <code>src/</code>, with no dependencies aside from the STL. This is a C++17 library developed using Microsoft Visual Studio and compatible with g++ and clang. The CMakeList and Makefile contain instructions for building the main library, some sample programs, and the test suite.</p>
<p><b>GCC/Clang Compiler Flags</b>: <code>-pthread -O3 -std=c++17</code></p>
<h3>CMake Instructions</h3>
<p>If you're including this in another CMake project, you can simply clone this repo into your project directory, and add the following to your CMakeLists.txt:</p>
<div class="fragment"><div class="line">include(${CMAKE_SOURCE_DIR}/.../csv-parser/CMakeLists.txt)</div><div class="line"></div><div class="line"># ...</div><div class="line"></div><div class="line">add_executable(&lt;your program&gt; ...)</div><div class="line">target_link_libraries(&lt;your program&gt; csv)</div></div><!-- fragment --><h2>Thirty-Second Introduction to Vince's CSV Parser</h2>
<ul>
<li><b>Parsing CSV Files from..</b><ul>
<li>Files: <a class="el" href="classcsv_1_1CSVReader.html" title="Main class for parsing CSVs from files and in-memory sources. ">csv::CSVReader(filename)</a></li>
<li>In-Memory Sources:<ul>
<li>Small: <a class="el" href="namespacecsv.html#af2d1242068d0e53a248c61e83c8349d9" title="Shorthand function for parsing an in-memory CSV string, a collection of CSVRow objects. ">csv::parse()</a> or csv::operator""_csv();</li>
<li>Large: <a class="el" href="classcsv_1_1CSVReader.html#a0e16afa967b390c29e2aab63087f5abe">csv::CSVReader::feed()</a>;</li>
</ul>
</li>
</ul>
</li>
<li><b>Retrieving Parsed CSV Rows (from CSVReader)</b><ul>
<li><a class="el" href="classcsv_1_1CSVReader_1_1iterator.html" title="An input iterator capable of handling large files. Created by CSVReader::begin() and CSVReader::end()...">csv::CSVReader::iterator()</a> (supports range-based for loop)</li>
<li><a class="el" href="classcsv_1_1CSVReader.html#aa28b87c77c5366e34ef86b35fb9f7238" title="Retrieve rows as CSVRow objects, returning true if more rows are available. ">csv::CSVReader::read_row()</a></li>
</ul>
</li>
<li><b>Working with CSV Rows</b><ul>
<li>Index by number or name: <a class="el" href="classcsv_1_1CSVRow.html#ad523d2b544bc7dab0a121891e5062d2c" title="Return a CSVField object corrsponding to the nth value in the row. ">csv::CSVRow::operator[]()</a></li>
<li>Random access iterator: <a class="el" href="classcsv_1_1CSVRow_1_1iterator.html" title="A random access iterator over the contents of a CSV row. Each iterator points to a CSVField...">csv::CSVRow::iterator()</a></li>
<li>Conversion: csv::CSVRow::operator std::vector&lt;std::string&gt;();</li>
</ul>
</li>
<li><b>Calculating Statistics</b><ul>
<li>Files: <a class="el" href="classcsv_1_1CSVStat.html" title="Class for calculating statistics from CSV files and in-memory sources. ">csv::CSVStat(filename)</a></li>
<li>In-Memory: <a class="el" href="classcsv_1_1CSVReader.html#a0e16afa967b390c29e2aab63087f5abe">csv::CSVStat::feed()</a></li>
</ul>
</li>
<li><b>Utility Functions</b><ul>
<li>Return column names: <a class="el" href="namespacecsv.html#a3d46fa01407dce7fd8f33d55604e74da" title="Return a CSV&#39;s column names. ">get_col_names()</a></li>
<li>Return the position of a column: <a class="el" href="namespacecsv.html#af36e457d080e4567f0939db04e193bff" title="Find the position of a column in a CSV file or CSV_NOT_FOUND otherwise. ">get_col_pos()</a>;</li>
<li>Return column types (for uploading to a SQL database): <a class="el" href="namespacecsv.html#ad4aa91cb61332520a139962f5b55944f" title="Useful for uploading CSV files to SQL databases. ">csv_data_types()</a>;</li>
</ul>
</li>
</ul>
<h2>Features &amp; Examples</h2>
<h3>Reading a Large File (with Iterators)</h3>
<p>With this library, you can easily stream over a large file without reading its entirety into memory.</p>
<p><b>C++ Style</b> </p><div class="fragment"><div class="line"><span class="preprocessor"># include &quot;<a class="code" href="csv__parser_8hpp.html">csv_parser.hpp</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecsv.html">csv</a>;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><a class="code" href="classcsv_1_1CSVReader.html">CSVReader</a> reader(<span class="stringliteral">&quot;very_big_file.csv&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<a class="code" href="classcsv_1_1CSVRow.html">CSVRow</a>&amp; row: reader) { <span class="comment">// Input iterator</span></div><div class="line">    <span class="keywordflow">for</span> (<a class="code" href="classcsv_1_1CSVField.html">CSVField</a>&amp; field: row) {</div><div class="line">        <span class="comment">// For efficiency, get&lt;&gt;() produces a string_view</span></div><div class="line">        std::cout &lt;&lt; field.get&lt;&gt;() &lt;&lt; ...</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">...</div></div><!-- fragment --><p><b>Old-Fashioned C Style Loop</b> </p><div class="fragment"><div class="line">...</div><div class="line"></div><div class="line">CSVReader reader(<span class="stringliteral">&quot;very_big_file.csv&quot;</span>);</div><div class="line">CSVRow row;</div><div class="line"></div><div class="line"><span class="keywordflow">while</span> (reader.read_row(row)) {</div><div class="line">    <span class="comment">// Do stuff with row here</span></div><div class="line">}</div><div class="line"></div><div class="line">...</div></div><!-- fragment --><h3>Indexing by Column Names</h3>
<p>Retrieving values using a column name string is a cheap, constant time operation.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># include &quot;<a class="code" href="csv__parser_8hpp.html">csv_parser.hpp</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecsv.html">csv</a>;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><a class="code" href="classcsv_1_1CSVReader.html">CSVReader</a> reader(<span class="stringliteral">&quot;very_big_file.csv&quot;</span>);</div><div class="line"><span class="keywordtype">double</span> sum = 0;</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; row: reader) {</div><div class="line">    <span class="comment">// Note: Can also use index of column with [] operator</span></div><div class="line">    sum += row[<span class="stringliteral">&quot;Total Salary&quot;</span>].get&lt;<span class="keywordtype">double</span>&gt;();</div><div class="line">}</div><div class="line"></div><div class="line">...</div></div><!-- fragment --><h3>Type Conversions</h3>
<p>If your CSV has lots of numeric values, you can also have this parser (lazily) convert them to the proper data type. Type checking is performed on conversions to prevent undefined behavior.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># include &quot;<a class="code" href="csv__parser_8hpp.html">csv_parser.hpp</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecsv.html">csv</a>;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><a class="code" href="classcsv_1_1CSVReader.html">CSVReader</a> reader(<span class="stringliteral">&quot;very_big_file.csv&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; row: reader) {</div><div class="line">    <span class="keywordflow">if</span> (row[<span class="stringliteral">&quot;timestamp&quot;</span>].is_int()) {</div><div class="line">        row[<span class="stringliteral">&quot;timestamp&quot;</span>].get&lt;<span class="keywordtype">int</span>&gt;();</div><div class="line"></div><div class="line">        <span class="comment">// ..</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3>Specifying a Specific Delimiter, Quoting Character, etc.</h3>
<p>Although the CSV parser has a decent guessing mechanism, in some cases it is preferrable to specify the exact parameters of a file.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># include &quot;<a class="code" href="csv__parser_8hpp.html">csv_parser.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor"># include ...</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecsv.html">csv</a>;</div><div class="line"></div><div class="line"><a class="code" href="structcsv_1_1CSVFormat.html">CSVFormat</a> format = {</div><div class="line">    <span class="charliteral">&#39;\t&#39;</span>,    <span class="comment">// Delimiter</span></div><div class="line">    <span class="charliteral">&#39;~&#39;</span>,     <span class="comment">// Quote-character</span></div><div class="line">    <span class="charliteral">&#39;2&#39;</span>,     <span class="comment">// Line number of header</span></div><div class="line">    {}       <span class="comment">// Column names -- if empty, then filled by reading header row</span></div><div class="line">};</div><div class="line"></div><div class="line"><a class="code" href="classcsv_1_1CSVReader.html">CSVReader</a> reader(<span class="stringliteral">&quot;wierd_csv_dialect.csv&quot;</span>, {}, format);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; row: reader) {</div><div class="line">    <span class="comment">// Do stuff with rows here</span></div><div class="line">}</div></div><!-- fragment --><h3>Parsing an In-Memory String</h3>
<div class="fragment"><div class="line"><span class="preprocessor"># include &quot;<a class="code" href="csv__parser_8hpp.html">csv_parser.hpp</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecsv.html">csv</a>;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="comment">// Method 1: Using parse()</span></div><div class="line">std::string csv_string = <span class="stringliteral">&quot;Actor,Character&quot;</span></div><div class="line">    <span class="stringliteral">&quot;Will Ferrell,Ricky Bobby\r\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;John C. Reilly,Cal Naughton Jr.\r\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;Sacha Baron Cohen,Jean Giard\r\n&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">auto</span> rows = <a class="code" href="namespacecsv.html#af2d1242068d0e53a248c61e83c8349d9">parse</a>(csv_string);</div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; r: rows) {</div><div class="line">    <span class="comment">// Do stuff with row here</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Method 2: Using _csv operator</span></div><div class="line"><span class="keyword">auto</span> rows = <span class="stringliteral">&quot;Actor,Character&quot;</span></div><div class="line">    <span class="stringliteral">&quot;Will Ferrell,Ricky Bobby\r\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;John C. Reilly,Cal Naughton Jr.\r\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;Sacha Baron Cohen,Jean Giard\r\n&quot;</span>_csv;</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; r: rows) {</div><div class="line">    <span class="comment">// Do stuff with row here</span></div><div class="line">}</div></div><!-- fragment --><h3>Writing CSV Files</h3>
<div class="fragment"><div class="line"><span class="preprocessor"># include &quot;<a class="code" href="csv__writer_8hpp.html">csv_writer.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor"># include ...</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecsv.html">csv</a>;</div><div class="line"><span class="keyword">using</span> vector;</div><div class="line"><span class="keyword">using</span> string;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">std::stringstream ss; <span class="comment">// Can also use ifstream, etc.</span></div><div class="line"><span class="keyword">auto</span> writer = <a class="code" href="namespacecsv.html#a7702fc0866ba716a7f7ee1388c15b477">make_csv_writer</a>(ss);</div><div class="line">writer &lt;&lt; vector&lt;string&gt;({ <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;C&quot;</span> })</div><div class="line">    &lt;&lt; vector&lt;string&gt;({ <span class="stringliteral">&quot;I&#39;m&quot;</span>, <span class="stringliteral">&quot;too&quot;</span>, <span class="stringliteral">&quot;tired&quot;</span> })</div><div class="line">    &lt;&lt; vector&lt;string&gt;({ <span class="stringliteral">&quot;to&quot;</span>, <span class="stringliteral">&quot;write&quot;</span>, <span class="stringliteral">&quot;documentation&quot;</span> });</div><div class="line"></div><div class="line">...</div></div><!-- fragment --><h2>Contributing</h2>
<p>Bug reports, feature requests, and so on are always welcome. Feel free to leave a note in the Issues section. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
